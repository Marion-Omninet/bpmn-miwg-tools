<html>
<head>
  <title>bpmn.js tester script</title>
  <!-- source file: 'bpmn-miwg/A.1.0' -->

  <style>
    body {
      margin: 0;
    }
  </style>
</head>
<body>

  <div id="canvas"></div>

  <script src="U:\Projects\bpmn.io\bpmn-js\dist\bpmn.js"></script>

  <script>

    function test() {
      var BpmnJS = require('bpmn/Modeler');

      var xml = '<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>\n<semantic:definitions id="_1373649849716" name="A.1.0" targetNamespace="http://www.trisotech.com/definitions/_1373649849716" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:semantic="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n    <semantic:process isExecutable="false" id="WFP-6-">\n        <semantic:startEvent name="Start Event" id="_93c466ab-b271-4376-a427-f4c353d55ce8">\n            <semantic:outgoing>_e16564d7-0c4c-413e-95f6-f668a3f851fb</semantic:outgoing>\n        </semantic:startEvent>\n        <semantic:task completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 1" id="_ec59e164-68b4-4f94-98de-ffb1c58a84af">\n            <semantic:incoming>_e16564d7-0c4c-413e-95f6-f668a3f851fb</semantic:incoming>\n            <semantic:outgoing>_d77dd5ec-e4e7-420e-bbe7-8ac9cd1df599</semantic:outgoing>\n        </semantic:task>\n        <semantic:task completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 2" id="_820c21c0-45f3-473b-813f-06381cc637cd">\n            <semantic:incoming>_d77dd5ec-e4e7-420e-bbe7-8ac9cd1df599</semantic:incoming>\n            <semantic:outgoing>_2aa47410-1b0e-4f8b-ad54-d6f798080cb4</semantic:outgoing>\n        </semantic:task>\n        <semantic:task completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 3" id="_e70a6fcb-913c-4a7b-a65d-e83adc73d69c">\n            <semantic:incoming>_2aa47410-1b0e-4f8b-ad54-d6f798080cb4</semantic:incoming>\n            <semantic:outgoing>_8e8fe679-eb3b-4c43-a4d6-891e7087ff80</semantic:outgoing>\n        </semantic:task>\n        <semantic:endEvent name="End Event" id="_a47df184-085b-49f7-bb82-031c84625821">\n            <semantic:incoming>_8e8fe679-eb3b-4c43-a4d6-891e7087ff80</semantic:incoming>\n        </semantic:endEvent>\n        <semantic:sequenceFlow sourceRef="_93c466ab-b271-4376-a427-f4c353d55ce8" targetRef="_ec59e164-68b4-4f94-98de-ffb1c58a84af" name="" id="_e16564d7-0c4c-413e-95f6-f668a3f851fb"/>\n        <semantic:sequenceFlow sourceRef="_ec59e164-68b4-4f94-98de-ffb1c58a84af" targetRef="_820c21c0-45f3-473b-813f-06381cc637cd" name="" id="_d77dd5ec-e4e7-420e-bbe7-8ac9cd1df599"/>\n        <semantic:sequenceFlow sourceRef="_820c21c0-45f3-473b-813f-06381cc637cd" targetRef="_e70a6fcb-913c-4a7b-a65d-e83adc73d69c" name="" id="_2aa47410-1b0e-4f8b-ad54-d6f798080cb4"/>\n        <semantic:sequenceFlow sourceRef="_e70a6fcb-913c-4a7b-a65d-e83adc73d69c" targetRef="_a47df184-085b-49f7-bb82-031c84625821" name="" id="_8e8fe679-eb3b-4c43-a4d6-891e7087ff80"/>\n    </semantic:process>\n    <bpmndi:BPMNDiagram documentation="" id="Trisotech_Visio-_6" name="A.1.0" resolution="96.00000267028808">\n        <bpmndi:BPMNPlane bpmnElement="WFP-6-">\n            <bpmndi:BPMNShape bpmnElement="_93c466ab-b271-4376-a427-f4c353d55ce8" id="S1373649849857__93c466ab-b271-4376-a427-f4c353d55ce8">\n                <dc:Bounds height="30.0" width="30.0" x="186.0" y="336.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1373649849858">\n                    <dc:Bounds height="12.804751171875008" width="94.93333333333335" x="153.67766754457273" y="371.3333333333333"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="_ec59e164-68b4-4f94-98de-ffb1c58a84af" id="S1373649849859__ec59e164-68b4-4f94-98de-ffb1c58a84af">\n                <dc:Bounds height="68.0" width="83.0" x="258.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1373649849858">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="263.3333333333333" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="_820c21c0-45f3-473b-813f-06381cc637cd" id="S1373649849860__820c21c0-45f3-473b-813f-06381cc637cd">\n                <dc:Bounds height="68.0" width="83.0" x="390.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1373649849858">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="395.3333333333333" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="_e70a6fcb-913c-4a7b-a65d-e83adc73d69c" id="S1373649849861__e70a6fcb-913c-4a7b-a65d-e83adc73d69c">\n                <dc:Bounds height="68.0" width="83.0" x="522.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1373649849858">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="527.3333333333334" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="_a47df184-085b-49f7-bb82-031c84625821" id="S1373649849862__a47df184-085b-49f7-bb82-031c84625821">\n                <dc:Bounds height="32.0" width="32.0" x="648.0" y="335.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1373649849858">\n                    <dc:Bounds height="12.804751171875008" width="94.93333333333335" x="616.5963254593177" y="372.3333333333333"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement="_d77dd5ec-e4e7-420e-bbe7-8ac9cd1df599" id="E1373649849864__d77dd5ec-e4e7-420e-bbe7-8ac9cd1df599">\n                <di:waypoint x="342.0" y="351.0"/>\n                <di:waypoint x="390.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_e16564d7-0c4c-413e-95f6-f668a3f851fb" id="E1373649849865__e16564d7-0c4c-413e-95f6-f668a3f851fb">\n                <di:waypoint x="216.0" y="351.0"/>\n                <di:waypoint x="234.0" y="351.0"/>\n                <di:waypoint x="258.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_2aa47410-1b0e-4f8b-ad54-d6f798080cb4" id="E1373649849866__2aa47410-1b0e-4f8b-ad54-d6f798080cb4">\n                <di:waypoint x="474.0" y="351.0"/>\n                <di:waypoint x="522.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_8e8fe679-eb3b-4c43-a4d6-891e7087ff80" id="E1373649849867__8e8fe679-eb3b-4c43-a4d6-891e7087ff80">\n                <di:waypoint x="606.0" y="351.0"/>\n                <di:waypoint x="624.0" y="351.0"/>\n                <di:waypoint x="648.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n        <bpmndi:BPMNLabelStyle id="LS1373649849858">\n            <dc:Font isBold="false" isItalic="false" isStrikeThrough="false" isUnderline="false" name="Arial" size="8.0"/>\n        </bpmndi:BPMNLabelStyle>\n    </bpmndi:BPMNDiagram>\n</semantic:definitions>\n';

      var container = document.getElementById('canvas');

      var renderer = window.renderer = new BpmnJS({ container: container, width: '100%', height: '100%' });

      var plan = 0;

      renderer.importXML(xml, function(err) {
        if (err) {
          console.log('import bpmn FAIL\n' + JSON.stringify(err));
          return console.log('done');
        }

        renderer.diagram.get('canvas').zoom('fit-viewport');

        console.info('import bpmn SUCCESS');

        renderer.saveSVG(function(err, svg) {

          if (err) {
            console.log('export svg FAIL\n' + JSON.stringify(err));
          } else {
            console.log('export svg SUCCESS\n' + svg);
          }

          if (++plan == 2) {
            console.log('done');
          }
        });

        renderer.saveXML({ format: true }, function(err, xml) {

          if (err) {
            console.log('export bpmn FAIL\n' + JSON.stringify(err));
          } else {
            console.log('export bpmn SUCCESS\n' + xml);
          }

          if (++plan == 2) {
            console.log('done');
          }
        });
      });
    }

    setTimeout(test, 250);
  </script>
</body>
</html>