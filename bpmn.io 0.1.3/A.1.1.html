<html>
<head>
  <title>bpmn.js tester script</title>
  <!-- source file: 'bpmn-miwg/A.1.1' -->

  <style>
    body {
      margin: 0;
    }
  </style>
</head>
<body>

  <div id="canvas"></div>

  <script src="U:\Projects\bpmn.io\bpmn-js\dist\bpmn.js"></script>

  <script>

    function test() {
      var BpmnJS = require('bpmn/Modeler');

      var xml = '<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>\n<semantic:definitions id="definitionsA11" name="A.1.1" targetNamespace="http://www.trisotech.com/definitions/_1398195902533" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:trisofeed="http://trisotech.com/feed" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:semantic="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:rss="http://purl.org/rss/2.0/" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xmlns:miwg="http://www.omg.org/bpmn/miwg/test/" xmlns:miwg-types="http://www.omg.org/bpmn/miwg/test/types/">\n	<semantic:import importType="http://schemas.xmlsoap.org/wsdl/" location="A.1.1.wsdl" namespace="http://www.omg.org/bpmn/miwg/test/"/>\n	<semantic:import importType="http://www.w3.org/2001/XMLSchema" location="A.1.1.xsd" namespace="http://www.omg.org/bpmn/miwg/test/types/"/>\n	<semantic:itemDefinition id="serviceInput" structureRef="miwg-types:in_A_1_1"></semantic:itemDefinition>\n    <semantic:resource name="Performer 1" id="resource_Performer_1"/>\n    <semantic:resource name="Performer 2" id="resource_Performer_2"/>\n    <semantic:message name="In Message" id="inMessage" itemRef="serviceInput"/>\n    <semantic:interface id="serviceInterface" name="MIWG Service Interface" implementationRef="miwg:Service_A_1_1Interface">\n		<semantic:operation id="operation1" name="Operation 1" implementationRef="miwg:operation_A_1_1">\n			<semantic:inMessageRef>inMessage</semantic:inMessageRef>\n		</semantic:operation>\n    </semantic:interface>\n    <semantic:process isExecutable="true" id="process1" isClosed="true">\n        <semantic:startEvent name="Start Event" id="startEvent">\n            <semantic:outgoing>_57dd58ed-7ab9-43e8-8d5c-e017940339a5</semantic:outgoing>\n        </semantic:startEvent>\n        <semantic:userTask completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 1" id="task1">\n            <semantic:incoming>_57dd58ed-7ab9-43e8-8d5c-e017940339a5</semantic:incoming>\n            <semantic:outgoing>_1a66ccd9-a80c-44bc-a06f-a684b8370443</semantic:outgoing>\n            <semantic:potentialOwner id="po1">\n                <semantic:resourceRef>resource_Performer_1</semantic:resourceRef>\n            </semantic:potentialOwner>\n        </semantic:userTask>\n        <semantic:serviceTask implementation="##WebService" completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 2" id="task2" operationRef="operation1">\n            <semantic:incoming>_1a66ccd9-a80c-44bc-a06f-a684b8370443</semantic:incoming>\n            <semantic:outgoing>_725826e9-0e8b-4cb4-842b-e0279515d821</semantic:outgoing>\n            <semantic:ioSpecification>\n				<semantic:dataInput id="dataInputTask2"  name="Data Input Task 2" itemSubjectRef="serviceInput"/>\n				<semantic:inputSet id="inputSet">\n					<semantic:dataInputRefs>dataInputTask2</semantic:dataInputRefs>\n					<semantic:outputSetRefs>outputSet</semantic:outputSetRefs>\n				</semantic:inputSet>\n				<semantic:outputSet id="outputSet">\n				    <semantic:inputSetRefs>inputSet</semantic:inputSetRefs>\n				</semantic:outputSet>\n            </semantic:ioSpecification>\n            <semantic:dataInputAssociation id="dataInputAssociation">\n                <semantic:targetRef>dataInputTask2</semantic:targetRef>\n                <semantic:transformation id="transformation">???</semantic:transformation>\n            </semantic:dataInputAssociation>\n        </semantic:serviceTask>\n        <semantic:userTask completionQuantity="1" isForCompensation="false" startQuantity="1" name="Task 3" id="task3">\n            <semantic:incoming>_725826e9-0e8b-4cb4-842b-e0279515d821</semantic:incoming>\n            <semantic:outgoing>_737085c4-8771-41e9-b30e-fa2668d0a481</semantic:outgoing>\n            <semantic:potentialOwner id="po2">\n                <semantic:resourceRef>resource_Performer_2</semantic:resourceRef>\n            </semantic:potentialOwner>\n        </semantic:userTask>\n        <semantic:endEvent name="End Event" id="endEvent">\n            <semantic:incoming>_737085c4-8771-41e9-b30e-fa2668d0a481</semantic:incoming>\n        </semantic:endEvent>\n        <semantic:sequenceFlow sourceRef="startEvent" targetRef="task1" name="" id="_57dd58ed-7ab9-43e8-8d5c-e017940339a5" isImmediate="true"/>\n        <semantic:sequenceFlow sourceRef="task1" targetRef="task2" name="" id="_1a66ccd9-a80c-44bc-a06f-a684b8370443"  isImmediate="true"/>\n        <semantic:sequenceFlow sourceRef="task2" targetRef="task3" name="" id="_725826e9-0e8b-4cb4-842b-e0279515d821"  isImmediate="true"/>\n        <semantic:sequenceFlow sourceRef="task3" targetRef="endEvent" name="" id="_737085c4-8771-41e9-b30e-fa2668d0a481"  isImmediate="true"/>\n    </semantic:process>\n    <bpmndi:BPMNDiagram documentation="" id="diagramA11" name="A.1.1" resolution="96.00000267028808">\n        <bpmndi:BPMNPlane bpmnElement="process1">\n            <bpmndi:BPMNShape bpmnElement="startEvent" id="shape_startEvent">\n                <dc:Bounds height="30.0" width="30.0" x="201.0" y="336.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1398190038883">\n                    <dc:Bounds height="12.804751171875008" width="94.93333333333335" x="168.67766754457273" y="371.3333333333333"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="task1" id="shape_task1">\n                <dc:Bounds height="68.0" width="83.0" x="267.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1398190038883">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="272.3333333333333" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="task2" id="shape_task2">\n                <dc:Bounds height="68.0" width="83.0" x="386.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1398190038883">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="391.3333333333333" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="task3" id="shape_task3">\n                <dc:Bounds height="68.0" width="83.0" x="505.0" y="317.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1398190038883">\n                    <dc:Bounds height="12.804751171875008" width="72.48293963254594" x="510.3333333333333" y="344.5818763825664"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNShape bpmnElement="endEvent" id="shape_endEvent">\n                <dc:Bounds height="32.0" width="32.0" x="625.0" y="335.0"/>\n                <bpmndi:BPMNLabel labelStyle="LS1398190038883">\n                    <dc:Bounds height="12.804751171875004" width="105.60000000000001" x="588.2629921259844" y="372.3333333333333"/>\n                </bpmndi:BPMNLabel>\n            </bpmndi:BPMNShape>\n            <bpmndi:BPMNEdge bpmnElement="_737085c4-8771-41e9-b30e-fa2668d0a481" id="E1398190040068__737085c4-8771-41e9-b30e-fa2668d0a481">\n                <di:waypoint x="589.0" y="351.0"/>\n                <di:waypoint x="607.0" y="351.0"/>\n                <di:waypoint x="625.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_57dd58ed-7ab9-43e8-8d5c-e017940339a5" id="E1398190040102__57dd58ed-7ab9-43e8-8d5c-e017940339a5">\n                <di:waypoint x="231.0" y="351.0"/>\n                <di:waypoint x="249.0" y="351.0"/>\n                <di:waypoint x="267.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_725826e9-0e8b-4cb4-842b-e0279515d821" id="E1398190040103__725826e9-0e8b-4cb4-842b-e0279515d821">\n                <di:waypoint x="469.0" y="351.0"/>\n                <di:waypoint x="505.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n            <bpmndi:BPMNEdge bpmnElement="_1a66ccd9-a80c-44bc-a06f-a684b8370443" id="E1398190040105__1a66ccd9-a80c-44bc-a06f-a684b8370443">\n                <di:waypoint x="350.0" y="351.0"/>\n                <di:waypoint x="386.0" y="351.0"/>\n                <bpmndi:BPMNLabel/>\n            </bpmndi:BPMNEdge>\n        </bpmndi:BPMNPlane>\n        <bpmndi:BPMNLabelStyle id="LS1398190038883">\n            <dc:Font isBold="false" isItalic="false" isStrikeThrough="false" isUnderline="false" name="Arial" size="8.0"/>\n        </bpmndi:BPMNLabelStyle>\n    </bpmndi:BPMNDiagram>\n</semantic:definitions>\n';

      var container = document.getElementById('canvas');

      var renderer = window.renderer = new BpmnJS({ container: container, width: '100%', height: '100%' });

      var plan = 0;

      renderer.importXML(xml, function(err) {
        if (err) {
          console.log('import bpmn FAIL\n' + JSON.stringify(err));
          return console.log('done');
        }

        renderer.diagram.get('canvas').zoom('fit-viewport');

        console.info('import bpmn SUCCESS');

        renderer.saveSVG(function(err, svg) {

          if (err) {
            console.log('export svg FAIL\n' + JSON.stringify(err));
          } else {
            console.log('export svg SUCCESS\n' + svg);
          }

          if (++plan == 2) {
            console.log('done');
          }
        });

        renderer.saveXML({ format: true }, function(err, xml) {

          if (err) {
            console.log('export bpmn FAIL\n' + JSON.stringify(err));
          } else {
            console.log('export bpmn SUCCESS\n' + xml);
          }

          if (++plan == 2) {
            console.log('done');
          }
        });
      });
    }

    setTimeout(test, 250);
  </script>
</body>
</html>